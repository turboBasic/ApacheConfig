Define                          DUMP_CONFIG

#ServerRoot                     #/etc/apache2
DefaultRuntimeDir               ${APACHE_RUN_DIR}
PidFile                         ${APACHE_PID_FILE}
Timeout                         300
KeepAlive                       On
MaxKeepAliveRequests            100
KeepAliveTimeout                5
User                            ${APACHE_RUN_USER}
Group                           ${APACHE_RUN_GROUP}
HostnameLookups                 Off
ErrorLog                        ${APACHE_LOG_DIR}/error.log
LogLevel                        warn

IncludeOptional                 mods-enabled/*.load
#LoadModule authn_core_module    /usr/lib/apache2/modules/mod_authn_core.so
#LoadModule access_compat_module /usr/lib/apache2/modules/mod_access_compat.so
#LoadModule alias_module         /usr/lib/apache2/modules/mod_alias.so
LoadModule auth_basic_module    /usr/lib/apache2/modules/mod_auth_basic.so
LoadModule authn_file_module    /usr/lib/apache2/modules/mod_authn_file.so
LoadModule authz_core_module    /usr/lib/apache2/modules/mod_authz_core.so
LoadModule authz_host_module    /usr/lib/apache2/modules/mod_authz_host.so
LoadModule authz_user_module    /usr/lib/apache2/modules/mod_authz_user.so
#LoadModule autoindex_module     /usr/lib/apache2/modules/mod_autoindex.so
LoadModule filter_module        /usr/lib/apache2/modules/mod_filter.so
#LoadModule deflate_module       /usr/lib/apache2/modules/mod_deflate.so
LoadModule dir_module           /usr/lib/apache2/modules/mod_dir.so
LoadModule dnssd_module         /usr/lib/apache2/modules/mod_dnssd.so
LoadModule env_module           /usr/lib/apache2/modules/mod_env.so
#LoadModule info_module          /usr/lib/apache2/modules/mod_info.so
#LoadModule mime_module          /usr/lib/apache2/modules/mod_mime.so
LoadModule mpm_prefork_module   /usr/lib/apache2/modules/mod_mpm_prefork.so
LoadModule negotiation_module   /usr/lib/apache2/modules/mod_negotiation.so
LoadModule php7_module          /usr/lib/apache2/modules/libphp7.0.so
LoadModule reqtimeout_module    /usr/lib/apache2/modules/mod_reqtimeout.so
#LoadModule setenvif_module      /usr/lib/apache2/modules/mod_setenvif.so
LoadModule socache_shmcb_module /usr/lib/apache2/modules/mod_socache_shmcb.so
#LoadModule ssl_module           /usr/lib/apache2/modules/mod_ssl.so
#LoadModule status_module        /usr/lib/apache2/modules/mod_status.so
LoadModule vhost_alias_module   /usr/lib/apache2/modules/mod_vhost_alias.so


IncludeOptional     mods-enabled/*.conf

<IfModule       mod_dnssd.c>
DNSSDEnable     On
</IfModule>

<IfModule               mpm_prefork_module>
StartServers			5
MinSpareServers		    5
MaxSpareServers		    10
MaxRequestWorkers	    150
MaxConnectionsPerChild  0
</IfModule>

<IfModule               mod_negotiation.c>
LanguagePriority        en ca cs da de el eo es et fr he hr it ja ko ltz nl nn no pl pt pt-BR ru sv tr zh-CN zh-TW
ForceLanguagePriority   Prefer Fallback
</IfModule>

<FilesMatch             ".+\.ph(p[3457]?|t|tml)$">
    SetHandler          application/x-httpd-php
</FilesMatch>
<FilesMatch             ".+\.phps$">
    SetHandler          application/x-httpd-php-source
    Require             all denied
</FilesMatch>
<FilesMatch             "^\.ph(p[3457]?|t|tml|ps)$">
    Require             all denied
</FilesMatch>

<IfModule           reqtimeout_module>
RequestReadTimeout  header=20-40,minrate=500
RequestReadTimeout  body=10,minrate=500
</IfModule>

<IfModule               mod_ssl.c>
SSLRandomSeed           startup builtin
SSLRandomSeed           startup file:/dev/urandom 512
SSLRandomSeed           connect builtin
SSLRandomSeed           connect file:/dev/urandom 512
AddType                 application/x-x509-ca-cert .crt
AddType                 application/x-pkcs7-crl	.crl
SSLPassPhraseDialog     exec:/usr/share/apache2/ask-for-passphrase
SSLSessionCache		    shmcb:${APACHE_RUN_DIR}/ssl_scache(512000)
SSLSessionCacheTimeout  300
SSLCipherSuite          HIGH:!aNULL
SSLProtocol             all -SSLv3
</IfModule>

Include             ports.conf

<Directory          />
	Options         FollowSymLinks
	AllowOverride   None
	Require         all denied
</Directory>

<Directory          /usr/share>
	AllowOverride   None
	Require         all granted
</Directory>

<Directory          /var/www/>
	Options         Indexes FollowSymLinks
	AllowOverride   None
	Require         all granted
</Directory>

AccessFileName      .htaccess
<FilesMatch         "^\.ht">
	Require         all denied
</FilesMatch>

LogFormat           "%v:%p %h %l %u %t \"%r\" %>s %O \"%{Referer}i\" \"%{User-Agent}i\"" vhost_combined
LogFormat           "%h %l %u %t \"%r\" %>s %O \"%{Referer}i\" \"%{User-Agent}i\"" combined
LogFormat           "%h %l %u %t \"%r\" %>s %O" common
LogFormat           "%{Referer}i -> %U" referer
LogFormat           "%{User-agent}i" agent

IncludeOptional    conf-enabled/*.conf

DocumentRoot    /var/www/html/aaa
<Directory      /var/www/html/aaa>
    Require     local
    Require     ip 10.0.0.0/8
</Directory>


#IncludeOptional            sites-enabled/*.conf
<VirtualHost                *:80>
	#ServerName             www.example.com
	ServerAdmin             webmaster@localhost
	DocumentRoot            /var/www/apache.local/public.html
	#LogLevel               info ssl:warn
	ErrorLog                ${APACHE_LOG_DIR}/error.log
	CustomLog               ${APACHE_LOG_DIR}/access.log combined
	Alias                   /share      /usr/share
	DirectoryIndex          index.php index.html
</VirtualHost>

<VirtualHost                *:80>
    ServerName              electro.test
    ServerAlias             *.electro.test
    DocumentRoot            /var/www/html/basic/web
</VirtualHost>

<VirtualHost                *:80>
    ServerName              dev.bebee.xyz
    DocumentRoot            /var/www/html/aaa
    <Directory              /var/www/html/aaa>
        Require             local
        Require             ip 10.0.0.0/8
    </Directory>
</VirtualHost>

<IfModule                   mod_ssl.c>
<VirtualHost                dev.bebee.xyz:443>
    ServerName              dev.bebee.xyz
    DocumentRoot            /var/www/apache.local/public.html
    SSLEngine               on
    SSLCertificateFile      /etc/ssl/dev.bebee.xyz-cert.pem
    SSLCertificateKeyFile   /etc/ssl/dev.bebee.xyz-key.pem
    SSLCertificateChainFile /etc/ssl/letsencrypt.pem
    SSLCACertificatePath    /etc/ssl/
    SSLCACertificateFile    /etc/ssl/letsencrypt.pem
    <FilesMatch             "\.(cgi|shtml|phtml|php)$">
            SSLOptions      +StdEnvVars
    </FilesMatch>
    <Directory              /usr/lib/cgi-bin>
            SSLOptions      +StdEnvVars
    </Directory>
    DirectoryIndex          index.php index.html
</VirtualHost>
</IfModule>

<IfModule                   mod_ssl.c>
<VirtualHost                _default_:443>
    ServerAdmin             webmaster@localhost
    DocumentRoot            /var/www/html
    ErrorLog                ${APACHE_LOG_DIR}/error.log
    CustomLog               ${APACHE_LOG_DIR}/access.log combined
    SSLEngine               on
    # mao
    SSLCertificateFile      /etc/ssl/dev.bebee.xyz-cert.pem
    SSLCertificateKeyFile   /etc/ssl/dev.bebee.xyz-key.pem
    SSLCertificateChainFile /etc/ssl/letsencrypt.pem
    SSLCACertificatePath    /etc/ssl/
    SSLCACertificateFile    /etc/ssl/letsencrypt.pem
    <FilesMatch             "\.(cgi|shtml|phtml|php)$">
            SSLOptions      +StdEnvVars
    </FilesMatch>
    <Directory              /usr/lib/cgi-bin>
            SSLOptions      +StdEnvVars
    </Directory>
    DirectoryIndex          index.php index.html
</VirtualHost>
</IfModule>

DirectoryIndex              index.php index.html

# vim: syntax=apache ts=4 sw=4 sts=4 sr noet
